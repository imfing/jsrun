name: Test Self-Hosted Runner

on:
  workflow_dispatch:  # Manual trigger

jobs:
  test-runner:
    runs-on: self-hosted  # This will use your GCP runners

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Test basic commands
        run: |
          echo "ðŸŽ‰ Runner is working!"
          echo "Runner OS: $(uname -a)"
          echo "Current directory: $(pwd)"
          echo "Available disk space:"
          df -h
          echo "Memory info:"
          free -h

      - name: Test GCP environment
        run: |
          echo "Testing GCP environment..."
          curl -s -H "Metadata-Flavor: Google" http://metadata.google.internal/computeMetadata/v1/instance/machine-type || echo "Not on GCP"
          curl -s -H "Metadata-Flavor: Google" http://metadata.google.internal/computeMetadata/v1/instance/zone || echo "Not on GCP"

      - name: Quick performance test
        run: |
          echo "Running quick performance test..."
          time echo "Hello World"
          time ls -la
          echo "Test completed successfully!"

      - name: Verify runner labels
        run: |
          echo "Runner labels: ${{ runner.labels }}"
          echo "Runner name: ${{ runner.name }}"
